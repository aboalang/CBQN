%DEF test binâ†(âŠ‘â€¢args).Bin@ â‹„ Testâ†{{132: 1; ğ•©}âŒ¾âŠ‘ {'âŠ'Â¨âŒ¾((ğ•©=@+10)âŠ¸/)ğ•©}Â¨âŒ¾(1âŠ¸â†“) (ğ•¨{sğ•Šğ•©: stdinâ‡s; â‡}@) â€¢SH âŸ¨binâŸ©âˆ¾ğ•©} â‹„ lfâ†@+10

%DEF t0 %USE test â‹„ c0â†"â€¢Show Â¯4" â‹„ c1â†"!0" â‹„ c2â†"aa" â‹„ c3â†"aâ‡1"

%USE test â‹„ Test "-e"â€¿"2+2" %% âŸ¨0,âŸ¨âŸ©,âŸ¨âŸ©âŸ©
%USE test â‹„ Test "-o"â€¿"2+2" %% âŸ¨1,âŸ¨âŸ©,"Error: (-o): Value to print must be a stringâŠ"âŸ©
%USE test â‹„ Test "-o"â€¿"3â¥Š'a'" %% âŸ¨0,"aaaâŠ",âŸ¨âŸ©âŸ©
%USE test â‹„ Test "-p"â€¿"2+2" %% âŸ¨0,"4âŠ",âŸ¨âŸ©âŸ©

%USE test â‹„ Test "-e"â€¿"!0" %% âŸ¨1,âŸ¨âŸ©,"Error: Assertion errorâŠ(-e):1:âŠ  !0âŠ  ^âŠ"âŸ©
%USE test â‹„ Test "-o"â€¿"!0" %% âŸ¨1,âŸ¨âŸ©,"Error: Assertion errorâŠ(-o):1:âŠ  !0âŠ  ^âŠ"âŸ©
%USE test â‹„ Test "-p"â€¿"!0" %% âŸ¨1,âŸ¨âŸ©,"Error: Assertion errorâŠ(-p):1:âŠ  !0âŠ  ^âŠ"âŸ©

%USE test â‹„ 6âŠ¸â†‘âŒ¾(1âŠ¸âŠ‘) Test â‹ˆ"--help" %% âŸ¨0,"Usage:",âŸ¨âŸ©âŸ©
%USE test â‹„ 5âŠ¸â†‘âŒ¾(1âŠ¸âŠ‘) Test â‹ˆ"--version" %% âŸ¨0,"CBQN ",âŸ¨âŸ©âŸ©

%USE t0 â‹„ Test "-e"â€¿c0 %% âŸ¨0,"Â¯4âŠ",âŸ¨âŸ©âŸ©
%USE t0 â‹„ Test "-e"â€¿c1 %% âŸ¨1,âŸ¨âŸ©,"Error: Assertion errorâŠ(-e):1:âŠ  !0âŠ  ^âŠ"âŸ©
%USE t0 â‹„ Test "-e"â€¿c2 %% âŸ¨1,âŸ¨âŸ©,"Error: Undefined identifierâŠ(-e):1:âŠ  aaâŠ  ^^âŠ"âŸ©
%USE t0 â‹„ Test "-e"â€¿c3 %% âŸ¨0,âŸ¨âŸ©,âŸ¨âŸ©âŸ©

%USE t0 â‹„ c0 Test â‹ˆ"-" %% âŸ¨0,"Â¯4âŠ",âŸ¨âŸ©âŸ©
%USE t0 â‹„ c1 Test â‹ˆ"-" %% âŸ¨1,âŸ¨âŸ©,"Error: Assertion errorâŠ(stdin):1:âŠ  !0âŠ  ^âŠ"âŸ©
%USE t0 â‹„ c2 Test â‹ˆ"-" %% âŸ¨1,âŸ¨âŸ©,"Error: Undefined identifierâŠ(stdin):1:âŠ  aaâŠ  ^^âŠ"âŸ©
%USE t0 â‹„ c3 Test â‹ˆ"-" %% âŸ¨0,âŸ¨âŸ©,âŸ¨âŸ©âŸ©

%USE t0 â‹„ c0 Test â‹ˆ"-s" %% âŸ¨0,"Â¯4âŠÂ¯4âŠ",âŸ¨âŸ©âŸ©
%USE t0 â‹„ c1 Test â‹ˆ"-s" %% âŸ¨0,âŸ¨âŸ©,"Error: Assertion errorâŠat !0âŠ   ^âŠ"âŸ©
%USE t0 â‹„ c2 Test â‹ˆ"-s" %% âŸ¨0,âŸ¨âŸ©,"Error: Undefined identifierâŠat aaâŠ   ^^âŠ"âŸ©
%USE t0 â‹„ c3 Test â‹ˆ"-s" %% âŸ¨0,"1âŠ",âŸ¨âŸ©âŸ©

%USE t0 â‹„ (")e "âˆ¾c0) Test â‹ˆ"-s" %% âŸ¨0," â€¢Show Â¯4 âŠ       â”‚  âŠ â€¢Showâ”€Â¯4 âŠâ•¶â”€â”€â”˜      âŠ",âŸ¨âŸ©âŸ©
%USE t0 â‹„ (")e "âˆ¾c1) Test â‹ˆ"-s" %% âŸ¨0," !0 âŠ  â”‚ âŠ !0 âŠâ•¶â”˜  âŠ",âŸ¨âŸ©âŸ©
%USE t0 â‹„ (")e "âˆ¾c2) Test â‹ˆ"-s" %% âŸ¨0,âŸ¨âŸ©,"Error: Undefined identifierâŠat aaâŠ   ^^âŠ"âŸ©
%USE t0 â‹„ (")e "âˆ¾c3) Test â‹ˆ"-s" %% âŸ¨0," aâ‡1 âŠ â”‚   âŠ aâ”€1 âŠâ•¶â”€â”€â”˜ âŠ",âŸ¨âŸ©âŸ©

%USE t0 â‹„ Test âŸ¨"-e", "â€¢BQN "âˆ¾â€¢Repr c0âŸ© %% âŸ¨0,"Â¯4âŠ",âŸ¨âŸ©âŸ©
%USE t0 â‹„ Test âŸ¨"-e", "â€¢BQN "âˆ¾â€¢Repr c1âŸ© %% âŸ¨1,âŸ¨âŸ©,"Error: Assertion errorâŠat !0âŠ   ^âŠ(-e):1:âŠ  â€¢BQN ""!0""âŠ  ^^^^âŠ"âŸ©
%USE t0 â‹„ Test âŸ¨"-e", "â€¢BQN "âˆ¾â€¢Repr c2âŸ© %% âŸ¨1,âŸ¨âŸ©,"Error: Undefined identifierâŠat aaâŠ   ^^âŠ(-e):1:âŠ  â€¢BQN ""aa""âŠ  ^^^^âŠ"âŸ©
%USE t0 â‹„ Test âŸ¨"-e", "â€¢BQN "âˆ¾â€¢Repr c3âŸ© %% âŸ¨0,âŸ¨âŸ©,âŸ¨âŸ©âŸ©

%USE t0 â‹„ Test âŸ¨"-e", "fâ†â€¢ReBQN{primitivesâ‡â‹ˆâŸ¨'!',!âˆ˜'e'âŸ©}"âˆ¾lfâˆ¾"F "âˆ¾â€¢Repr c0âŸ© %% âŸ¨0,"Â¯4âŠ",âŸ¨âŸ©âŸ©
%USE t0 â‹„ Test âŸ¨"-e", "fâ†â€¢ReBQN{primitivesâ‡â‹ˆâŸ¨'!',!âˆ˜'e'âŸ©}"âˆ¾lfâˆ¾"F "âˆ¾â€¢Repr c1âŸ© %% âŸ¨1,âŸ¨âŸ©,"Error: 'e'âŠat !0âŠ   ^âŠ(-e):2:âŠ  F ""!0""âŠ  ^âŠ"âŸ©
%USE t0 â‹„ Test âŸ¨"-e", "fâ†â€¢ReBQN{primitivesâ‡â‹ˆâŸ¨'!',!âˆ˜'e'âŸ©}"âˆ¾lfâˆ¾"F "âˆ¾â€¢Repr c2âŸ© %% âŸ¨1,âŸ¨âŸ©,"Error: Undefined identifierâŠat aaâŠ   ^^âŠ(-e):2:âŠ  F ""aa""âŠ  ^âŠ"âŸ©
%USE t0 â‹„ Test âŸ¨"-e", "fâ†â€¢ReBQN{primitivesâ‡â‹ˆâŸ¨'!',!âˆ˜'e'âŸ©}"âˆ¾lfâˆ¾"F "âˆ¾â€¢Repr c3âŸ© %% âŸ¨0,âŸ¨âŸ©,âŸ¨âŸ©âŸ©

%USE t0 â‹„ Test âŸ¨"-e", "fâ†â€¢ReBQN{primitivesâ‡â‹ˆâŸ¨'!',!âˆ˜'e'âŸ©,replâ‡""loose""}"âˆ¾lfâˆ¾"F "âˆ¾â€¢Repr c0âŸ© %% âŸ¨0,"Â¯4âŠ",âŸ¨âŸ©âŸ©
%USE t0 â‹„ Test âŸ¨"-e", "fâ†â€¢ReBQN{primitivesâ‡â‹ˆâŸ¨'!',!âˆ˜'e'âŸ©,replâ‡""loose""}"âˆ¾lfâˆ¾"F "âˆ¾â€¢Repr c1âŸ© %% âŸ¨1,âŸ¨âŸ©,"Error: 'e'âŠat !0âŠ   ^âŠ(-e):2:âŠ  F ""!0""âŠ  ^âŠ"âŸ©
%USE t0 â‹„ Test âŸ¨"-e", "fâ†â€¢ReBQN{primitivesâ‡â‹ˆâŸ¨'!',!âˆ˜'e'âŸ©,replâ‡""loose""}"âˆ¾lfâˆ¾"F "âˆ¾â€¢Repr c2âŸ© %% âŸ¨1,âŸ¨âŸ©,"Error: Undefined identifierâŠat aaâŠ   ^^âŠ(-e):2:âŠ  F ""aa""âŠ  ^âŠ"âŸ©
%USE t0 â‹„ Test âŸ¨"-e", "fâ†â€¢ReBQN{primitivesâ‡â‹ˆâŸ¨'!',!âˆ˜'e'âŸ©,replâ‡""loose""}"âˆ¾lfâˆ¾"F "âˆ¾â€¢Repr c3âŸ© %% âŸ¨1,âŸ¨âŸ©,"Error: Cannot construct a namespace for a REPL resultâŠ(-e):2:âŠ  F ""aâ‡1""âŠ  ^âŠ"âŸ©

%USE t0 â‹„ Test âŸ¨"-e", "fâ†â€¢ReBQN{primitivesâ‡â‹ˆâŸ¨'!',!âˆ˜'e'âŸ©,replâ‡""strict""}"âˆ¾lfâˆ¾"F "âˆ¾â€¢Repr c0âŸ© %% âŸ¨0,"Â¯4âŠ",âŸ¨âŸ©âŸ©
%USE t0 â‹„ Test âŸ¨"-e", "fâ†â€¢ReBQN{primitivesâ‡â‹ˆâŸ¨'!',!âˆ˜'e'âŸ©,replâ‡""strict""}"âˆ¾lfâˆ¾"F "âˆ¾â€¢Repr c1âŸ© %% âŸ¨1,âŸ¨âŸ©,"Error: 'e'âŠat !0âŠ   ^âŠ(-e):2:âŠ  F ""!0""âŠ  ^âŠ"âŸ©
%USE t0 â‹„ Test âŸ¨"-e", "fâ†â€¢ReBQN{primitivesâ‡â‹ˆâŸ¨'!',!âˆ˜'e'âŸ©,replâ‡""strict""}"âˆ¾lfâˆ¾"F "âˆ¾â€¢Repr c2âŸ© %% âŸ¨1,âŸ¨âŸ©,"Error: Undefined identifierâŠat aaâŠ   ^^âŠ(-e):2:âŠ  F ""aa""âŠ  ^âŠ"âŸ©
%USE t0 â‹„ Test âŸ¨"-e", "fâ†â€¢ReBQN{primitivesâ‡â‹ˆâŸ¨'!',!âˆ˜'e'âŸ©,replâ‡""strict""}"âˆ¾lfâˆ¾"F "âˆ¾â€¢Repr c3âŸ© %% âŸ¨1,âŸ¨âŸ©,"Error: Cannot construct a namespace for a REPL resultâŠ(-e):2:âŠ  F ""aâ‡1""âŠ  ^âŠ"âŸ©
